# å˜ç´”ã«ä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç´¹ä»‹


## decoratorãƒ‘ã‚¿ãƒ¼ãƒ³
 
before: controller -> view  
after:  controller -> decorator -> view  
 
ä¸­é–“ã«ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’æŒŸã‚€ã“ã¨ã§ã€ãƒ­ã‚¸ãƒƒã‚¯ã«æ‰‹ã‚’ä¸‹ã•ãªãã¦ã‚‚æ”¹å¤‰ãŒã§ãã‚‹ã€‚
ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ä¼¼ã¦ã„ã‚‹
 
### gem
- ActiveDecorator
- Draper
 
### directory
app/decorators
 
 
## Deliveryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
slackã¨ã‹lineã¨ã‹é€šçŸ¥ã«é–¢é€£ã™ã‚‹å‡¦ç†ã‚’çµ±æ‹¬ã™ã‚‹
 
before:
- job -> slack
- job -> line

after:
- job -> delivery -> slack, line, etc

### gem
- active_delivery
 
### directory
app/deliveries
 
 
## Formã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
ã‚·ãƒ³ãƒ—ãƒ«ãªcreateã¨ã‹updateã¨ã‹ã§å®Œçµã—ãªã„ã€ActiveRecordé–¢é€£ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹æ™‚ã«å®Ÿè£…ã™ã‚‹ã€‚
ä¾‹ãˆã°ã€åŒæ™‚ã«é–¢é€£ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹æ™‚ã¨ã‹
[ã‚µãƒ³ãƒ—ãƒ«](https://github.com/tonton-k/BP-form-obj-ptrn)ã§ã¯ã€è¤‡æ•°ã®é–¢é€£ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ•ã‚©ãƒ¼ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§æ¤œè¨¼ã—ã¦ã„ã‚‹ã€‚

### directory
app/forms
 
 
## Interactorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
å¤–éƒ¨APIã¨ã®ã‚„ã‚Šã¨ã‚Šã‚„ã€è¤‡æ•°ã®ARã‚’æ¨ªæ–­ã™ã‚‹å ´åˆã«ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®è‚¥å¤§åŒ–ã‚’é˜²ããŸã‚ã«ä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ã‚µãƒ¼ãƒ“ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ä¼¼ã¦ã‚‹ã€‚

### gem
- interactor
 
### directory
app/interactors

## Policyã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ«ãƒ¼ãƒ«ã‚’å®šã‚ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚ä¾‹ãˆã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¨®é¡ã«ã‚ˆã£ã¦å¤‰ã‚ã‚‹å‡¦ç†ã¨ã‹ã‚’ã€Policyã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ğŸ–åŒ–ã‚’é¿ã‘ã‚‰ã‚Œã‚‹ã€‚
 
### gem
- pundit
 
### directory
app/policies


## Queryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
ãƒ¢ãƒ‡ãƒ«ã®ã‚¹ã‚³ãƒ¼ãƒ—ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ä½¿ç”¨ã€‚ãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›´ã‚’åŠ ãˆã¦ã‚‚ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ãŒå°‘ãªããªã‚‹ã€‚

### directory
app/queries

## Validatorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
è¤‡æ•°ã®å ´æ‰€ã§ä½¿ã†validationã‚’ï¼‘ç®‡æ‰€ã«ã¾ã¨ã‚ã‚‹ã“ã¨ã§ã€ç„¡é§„ã‚’ç„¡ãã—ã€ä¿å®ˆæ€§ã‚’ã‚ã’ã‚‹ã€‚
ä¾‹ãˆã°ã€ä¸‹è¨˜ã®ã‚ˆã†ã«ã‚„ã£ã¦ã‚‹ã“ã¨ã¯åŒã˜ãªã®ã«è¤‡æ•°ã®å ´æ‰€ã«åŒã˜ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®šç¾©ã•ã‚Œã¦ãŸã‚‰å†—é•·ãªã‚“ã§ã€ã ã£ãŸã‚‰ï¼‘ç®‡æ‰€ã«ã¾ã¨ã‚ã¦æ›¸ã„ã¡ã‚ƒãŠã†ãœã£ã¦è©±ã€‚

**models**
- Note.rb -> validates: title, length: { minimum: 10, too_short: "ã‚‚ã£ã¨æš‘ã„é­‚ã®ã“ã‚‚ã£ãŸã‚¿ã‚¤ãƒˆãƒ«ã«ã—ã‚ˆã†ã‚ˆ" }
- Comment.rb -> validates: title, length: { minimum: 10, too_short: "ã‚‚ã£ã¨æš‘ã„é­‚ã®ã“ã‚‚ã£ãŸã‚¿ã‚¤ãƒˆãƒ«ã«ã—ã‚ˆã†ã‚ˆ"}

### directory
app/validators


## Valueã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
æ—¥ä»˜ã ã£ãŸã‚Šã€é‡‘é¡ã ã£ãŸã‚Šã€å€‹ã€…ã«ã‚ˆã£ã¦é™å®šã•ã‚Œãªã„ç‰©ã‚’Valueã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æ‰±ã†ã€‚
ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ä¼¼ã¦ã‚‹ã€‚

[å‚è€ƒ](https://techracho.bpsinc.jp/hachi8833/2018_03_27/53794)

### directory
app/values

## View Component ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
å†åˆ©ç”¨å¯èƒ½ãªãƒ“ãƒ¥ãƒ¼ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹ã€‚

### directory
app/view_components


### gem
- view_component


## å‚è€ƒãƒªãƒ³ã‚¯

[ã“ã“](https://www.sitepoint.com/7-design-patterns-to-refactor-mvc-components-in-rails/)
